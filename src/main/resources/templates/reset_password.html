<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Restablecer contraseña | Alemandan POS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Incluye los CSS externos -->
    <link rel="stylesheet" th:href="@{/assets/css/style.css}">
    <link rel="stylesheet" th:href="@{/assets/css/reset_password.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
<!-- Header profesional -->
<header class="header">
    <nav class="navbar">
        <div class="logo-container">
            <a th:href="@{/}">
                <img th:src="@{/assets/img/Alogo.png}" alt="Alemandan Logo" class="logo bounce-in">
            </a>
        </div>
        <ul class="nav-links">
            <li><a th:href="@{/}" class="nav-link">Inicio</a></li>
            <li><a th:href="@{/#features}" class="nav-link">Características</a></li>
            <li><a th:href="@{/#about}" class="nav-link">Sobre Nosotros</a></li>
        </ul>
    </nav>
</header>

<main>
    <div class="reset-wrapper">
        <div class="reset-form-container">
            <h1>Restablecer contraseña</h1>
            <p class="description">Ingresa tu correo electrónico y la nueva contraseña que deseas usar.</p>
            <form method="post" th:action="@{/reset-password}" id="resetForm">
                <label for="email">Correo electrónico:</label>
                <input type="email" name="email" id="email" th:value="${prefilledEmail}" placeholder="tu@correo.com" required>
                <label for="password">Nueva contraseña:</label>
                <input type="password" name="password" id="password" placeholder="Ingresa nueva contraseña" required minlength="8">
                <small class="hint">Mínimo 8 caracteres, debe incluir letras y números</small>
                <label for="confirmPassword">Repetir contraseña:</label>
                <input type="password" name="confirmPassword" id="confirmPassword" placeholder="Repite la contraseña" required minlength="8">
                <div id="jsError" class="error-message" style="display:none;"></div>
                <button type="submit">Restablecer</button>
            </form>
            <div th:if="${error}" class="error-message" th:text="${error}"></div>
            <div th:if="${mensaje}" class="success-message" th:text="${mensaje}"></div>
            <div class="help-link">
                <a th:href="@{/login}">Volver al inicio de sesión</a>
            </div>
        </div>
    </div>
</main>

<!-- Footer profesional -->
<footer class="footer">
    <div class="footer-container">
        <div class="footer-logo">
            <img th:src="@{/assets/img/Alogo.png}" src="/assets/img/Alogo.png" alt="Alemandan Logo">
        </div>
        <div class="footer-links">
            <a href="/">Inicio</a>
            <a href="#features">Características</a>
            <a href="#about">Sobre Nosotros</a>
            <a th:href="@{/login}" href="/login">Ingresar</a>
            <a href="/terminos" target="_blank">Términos y condiciones</a>
            <a href="/privacidad" target="_blank">Política de privacidad</a>
            <a href="/faq" target="_blank">FAQ</a>
            <a href="/pqr" target="_blank">PQR</a>
            <a href="/mapa" target="_blank">Mapa de navegación</a>
        </div>
        <div class="footer-social">
            <a href="#" title="Twitter"><i class="fab fa-twitter"></i></a>
            <a href="#" title="WhatsApp"><i class="fab fa-whatsapp"></i></a>
            <a href="#" title="Instagram"><i class="fab fa-instagram"></i></a>
        </div>
        <div class="footer-contact">
            <div><i class="fas fa-phone"></i> +57 123 456 7890</div>
            <div><i class="fas fa-map-marker-alt"></i> Bogotá, Colombia</div>
        </div>
    </div>
    <div class="footer-bottom">
        <p>&copy; 2025 Alemandan POS. Todos los derechos reservados.</p>
    </div>
</footer>
<!-- Validación JS -->
<script>
    document.getElementById('resetForm').onsubmit = function(e) {
        var email = document.getElementById('email').value;
        var pass1 = document.getElementById('password').value;
        var pass2 = document.getElementById('confirmPassword').value;
        var errorDiv = document.getElementById('jsError');
        errorDiv.style.display = "none";
        
        // HTML5 email validation handles format check
        // Additional client-side validation for passwords
        
        if (pass1.length < 8 || pass2.length < 8) {
            errorDiv.textContent = "La contraseña debe tener al menos 8 caracteres.";
            errorDiv.style.display = "block";
            e.preventDefault();
            return false;
        }
        
        if (!/[a-zA-Z]/.test(pass1)) {
            errorDiv.textContent = "La contraseña debe contener al menos una letra.";
            errorDiv.style.display = "block";
            e.preventDefault();
            return false;
        }
        
        if (!/\d/.test(pass1)) {
            errorDiv.textContent = "La contraseña debe contener al menos un número.";
            errorDiv.style.display = "block";
            e.preventDefault();
            return false;
        }
        
        if (pass1 !== pass2) {
            errorDiv.textContent = "Las contraseñas no coinciden.";
            errorDiv.style.display = "block";
            e.preventDefault();
            return false;
        }
        return true;
    };
</script>
</body>
</html>